server:
  port: 8080

nvr:
  # 与 Nginx 保持一致的目录，避免旧清单被读取
  hlsRoot: /var/www/streams
  ffmpeg: /usr/bin/ffmpeg
  hls:
    time: 1          # 每段 1s，降低端到端延迟
    listSize: 10     # 稍长窗口（≈10s），提升容错与连续性
    deleteSegments: true
    aacBitrate: 96k
  ffmpegFlags: "-rtsp_transport tcp -rtsp_flags prefer_tcp -analyzeduration 2000000 -probesize 2000000 -fflags nobuffer+genpts -flags low_delay -use_wallclock_as_timestamps 1"
  evidence:
    root: ../evidence
    snapshotThrottleSeconds: 30
  webrtc:
    enabled: true
    binary: third_party/webrtc-streamer/bin/webrtc-streamer
    hostPort: 0.0.0.0:8800
    webRoot: third_party/webrtc-streamer/share/webrtc-streamer/html
    config: third_party/webrtc-streamer/share/webrtc-streamer/config.json
    extraArgs: "-o -v"

spring:
  mvc:
    cors:
      mappings:
        - path-pattern: "/**"
          allowed-origins: "*"
          allowed-methods: "*"
          allowed-headers: "*"

wx:
  appId: wx6a859de2d9d4bad0
  appSecret: 563f953524c9dcc96d5cee984e6fcf24
  templateId: lKtnQJIVx4mFSs9QJWm6xhL5in6KYOsrcdmhpNzCLfQ
  alertPage: pages/alerts/index

weixin:
  appid: wx6a859de2d9d4bad0
  secret: 563f953524c9dcc96d5cee984e6fcf24

tcb:
  envId: cloud1-0grqej0tb7ac6745
  ingestFunction: ingestAlarm
  snapshotUploadThresholdKB: 256
  defaultUserId: demo-admin

security:
  hmacSecret: b43d59e7e9a34f428d88e9f3c90b5e63c6a0dcebeae4485b8cb93b771b75d3f7

http:
  connectTimeoutMs: 5000
  readTimeoutMs: 7000
